<%- include('../../includes/header', { title: locals.title}); %>

<h1>Containers</h1>

<%- locals.content %>

<table class="ce-table">
	<tr>
		<th>
			<a href="/_m8/ce/nodes/?orderhow=asc&orderby=id">ID</a>
		</th>
		<th>
			<a href="/_m8/ce/nodes/?orderhow=asc&orderby=islive">Status</a>
		</th>
		<th>
			<a href="/_m8/ce/nodes/?orderby=asc&orderby=parentid">Channel</a>
		</th>
		<th>
			<a href="/_m8/ce/nodes/?orderby=asc&orderby=parentid">Num</a>
		</th>
		<th>
			<a href="/_m8/ce/nodes/?orderby=asc&orderby=path">Slug/Path</a>
		</th>
		<th>
			<a href="/_m8/ce/nodes/?orderby=asc&orderby=title">
				Title
			</a>
		</th>
		<th>Type</th>
	</tr>

	<% for(let i=0; i<all_nodes.length; i++) { %>
		<tr>
			<td>
				<a href="/_m8/ce/nodes/read?id=<%- all_nodes[i].id %>">
					<img src="/_m8/img/icon-edit.svg" alt="edit node" />
					<% if(all_nodes[i].parentid === 0) { %>🌏<%}%>
					<%- all_nodes[i].id %>
				</a>
			</td>
			<td>
				live
			</td>
			<td>
				<%# if(all_nodes[i].parentid === 0) { style="background-color:#6495ed;"}%>
				<%- all_nodes[i].parentid %>
				<hr style="color:#f0f0f0;">
				<span style="color:#555;">
					Parentname
				</span>
			</td>
			<td>
				<%- all_nodes[i].ord %>
			</td>
			<td>
				Slug
				<hr>
				<a href="<%- all_nodes[i].path %>" target="m8preview">
					<img src="/_m8/img/icon-view.svg" alt="view node" />
					<%- all_nodes[i].path %>
				</a>
			</td>
			<td><%- all_nodes[i].title %></td>
			<td><%- all_nodes[i].type %></td>
		</tr>
	<% } %>
</table>

<div class="button">
	<a href="/_m8/ce/nodes/create">Create new Container</a>
</div>

<% if(locals.page.verbose > 3){ %>
	<pre style="background-color:pink;max-width:1200px;overflow:scroll;">
		DEBUG:
		is array of objects sorted by ?id/path?
		<%- JSON.stringify(all_nodes, null, 4) %>
	</pre>
<% } %>

<%- include('../../includes/footer'); %>
